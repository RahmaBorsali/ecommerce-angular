import{a as q,b as U}from"./chunk-CLVDU3HE.js";import{a as A,b as R}from"./chunk-X7VRKKFN.js";import{d as z,e as L,j as B}from"./chunk-IW6AFLJC.js";import"./chunk-PI5CFJYO.js";import{a as Q}from"./chunk-44UXRYPE.js";import{$ as P,$a as T,$b as N,Bb as h,Ma as I,Qa as p,V as x,Xa as c,Xb as O,Ya as o,Yb as $,Za as n,_ as b,_a as d,a as S,ab as F,b as E,bb as y,bc as V,cb as w,d as K,db as m,nb as l,ob as D,pb as u,ua as C,ub as M,xa as r,xb as j,yb as k,zb as f}from"./chunk-R6KUZMSD.js";var J=K(Q());var W=()=>[1,2,3,4,5],X=i=>["/products",i];function Y(i,t){i&1&&(o(0,"div",5),d(1,"div",6),n())}function Z(i,t){if(i&1){let e=y();o(0,"div",7)(1,"div",8)(2,"h1",9),l(3,"Une erreur est survenue"),n(),o(4,"button",10),w("click",function(){b(e);let a=m();return P(a.reload())}),l(5," \u{1F504} Recharger la page "),n()()()}}function ee(i,t){if(i&1&&(o(0,"div",35),l(1),n()),i&2){let e=m().$implicit;r(),u(" -",e.discountPercent,"% ")}}function te(i,t){if(i&1&&(T(0),o(1,"span"),l(2),n(),F()),i&2){let e=t.$implicit,s=m().$implicit,a=m(2);r(2),D(e<=a.Math.round(s.rating||0)?"\u2605":"\u2606")}}function ie(i,t){if(i&1&&(o(0,"span",36),l(1),f(2,"number"),n()),i&2){let e=m().$implicit;r(),u(" ",h(2,1,e.oldPrice,"1.2-2")," DT ")}}function oe(i,t){if(i&1){let e=y();o(0,"article",19)(1,"div",20),d(2,"img",21),p(3,ee,2,1,"div",22),n(),o(4,"div",23)(5,"h3",24),l(6),n(),o(7,"div",25),p(8,te,3,1,"ng-container",26),o(9,"span",27),l(10),f(11,"number"),n()(),o(12,"div",28)(13,"span",29),l(14),f(15,"number"),n(),p(16,ie,3,4,"span",30),n(),o(17,"div",31)(18,"a",32),l(19," Voir le produit "),n(),o(20,"button",33),w("click",function(){let a=b(e).$implicit,g=m(2);return P(g.addToCart(a))}),d(21,"i",34),n()()()()}if(i&2){let e=t.$implicit;r(2),c("src",e.image,C)("alt",e.title),r(),c("ngIf",e.discountPercent),r(2),c("title",M(e.title)),r(),u(" ",e.title," "),r(2),c("ngForOf",j(17,W)),r(2),u("(",h(11,11,e.rating,"1.1-1"),")"),r(4),u(" ",h(15,14,e.price,"1.2-2")," DT "),r(2),c("ngIf",e.oldPrice),r(2),c("routerLink",k(18,X,e.id))}}function ne(i,t){if(i&1&&(o(0,"section",11)(1,"div",12)(2,"div",13),d(3,"i",14),l(4," OFFRES SP\xC9CIALES "),n(),o(5,"h2",15),l(6," Promotions Exceptionnelles "),n(),o(7,"p",16),l(8,"Jusqu'\xE0 -35% sur une s\xE9lection de produits"),n()(),o(9,"div",17),p(10,oe,22,20,"article",18),n()()),i&2){let e=m();r(10),c("ngForOf",e.promos)}}var H=class i{Math=Math;title=x(L);meta=x(z);store=x(U);cart=x(q);loading=!0;error=null;promos=[];ngOnInit(){this.title.setTitle("Promotions - ShopNow"),this.meta.updateTag({name:"description",content:"D\xE9couvrez nos meilleures offres promotionnelles"}),this.meta.updateTag({property:"og:title",content:"Promotions - ShopNow"}),this.meta.updateTag({property:"og:description",content:"D\xE9couvrez nos meilleures offres promotionnelles"}),this.meta.updateTag({name:"twitter:title",content:"Promotions - ShopNow"}),this.meta.updateTag({name:"twitter:description",content:"D\xE9couvrez nos meilleures offres promotionnelles"});try{this.store.getAllMerged$().subscribe({next:t=>{this.promos=this.selectPromotions(t),this.loading=!1},error:t=>{this.error=t||!0,this.loading=!1}})}catch(t){this.error=t||!0,this.loading=!1}}selectPromotions(t){let s=(t||[]).map(a=>{let g=(a.category||"").toLowerCase(),_=/audio|gaming|electronique|electronics/.test(g)?[10,15,20,25,30][Math.floor(Math.random()*5)]:void 0,v=a.price,G=_?+(v*(1-_/100)).toFixed(2):v;return E(S({},a),{oldPrice:v,price:G,discountPercent:_})}).filter(a=>a.discountPercent);return s.sort((a,g)=>(g.discountPercent||0)-(a.discountPercent||0)),s.slice(0,12)}addToCart(t){this.cart.addToCart({id:t.id,name:t.title,price:t.price,image:t.image,quantity:1}),J.default.fire({icon:"success",title:"Produit ajout\xE9 !",text:`"${t.title}" a \xE9t\xE9 ajout\xE9 \xE0 votre panier.`,timer:2e3,showConfirmButton:!1,position:"top-end",toast:!0})}reload(){location.reload()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=I({type:i,selectors:[["app-promotions"]],decls:7,vars:3,consts:[[1,"min-h-screen","bg-[var(--bg-light,#f9fafb)]"],[1,"container","mx-auto","px-4","py-10"],["class","flex items-center justify-center py-24",4,"ngIf"],["class","min-h-[40vh] flex items-center justify-center bg-gray-50 rounded-xl",4,"ngIf"],["class","space-y-6","aria-label","Promotions",4,"ngIf"],[1,"flex","items-center","justify-center","py-24"],[1,"animate-pulse","w-16","h-16","rounded-full","bg-amber-500","shadow-lg"],[1,"min-h-[40vh]","flex","items-center","justify-center","bg-gray-50","rounded-xl"],[1,"text-center"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"px-6","py-2.5","bg-blue-600","text-white","font-medium","rounded-lg","shadow-md","hover:bg-blue-500","hover:shadow-lg","active:scale-95","transition-all","duration-200",3,"click"],["aria-label","Promotions",1,"space-y-6"],[1,"text-center","mb-10"],[1,"inline-flex","items-center","gap-2","px-4","py-1.5","rounded-full","bg-orange-50","text-orange-600","text-sm","font-semibold","shadow-sm","ring-1","ring-orange-100"],[1,"icon-zap"],[1,"mt-4","text-3xl","md:text-4xl","font-extrabold","text-gray-900"],[1,"text-gray-500","mt-1"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],["class","bg-white rounded-2xl shadow-[0_5px_20px_rgba(0,0,0,0.08)] border border-gray-100 overflow-hidden hover:shadow-[0_8px_25px_rgba(0,0,0,0.12)] transition-all duration-300 hover:-translate-y-1 flex flex-col",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-[0_5px_20px_rgba(0,0,0,0.08)]","border","border-gray-100","overflow-hidden","hover:shadow-[0_8px_25px_rgba(0,0,0,0.12)]","transition-all","duration-300","hover:-translate-y-1","flex","flex-col"],[1,"relative"],[1,"w-full","h-48","md:h-56","object-cover",3,"src","alt"],["class","absolute top-3 right-3 h-12 w-12 bg-rose-600 text-white text-sm font-bold rounded-full grid place-items-center shadow-lg",4,"ngIf"],[1,"p-4","flex","flex-col","flex-1"],[1,"font-semibold","text-base","md:text-lg","mb-2","text-gray-800","line-clamp-2",3,"title"],[1,"flex","items-center","gap-1","text-amber-500","text-xs","mb-3"],[4,"ngFor","ngForOf"],[1,"text-gray-500","ml-1"],[1,"flex","items-baseline","gap-2","mb-4"],[1,"text-rose-600","font-extrabold","text-lg"],["class","text-gray-400 line-through text-sm",4,"ngIf"],[1,"mt-auto","flex","gap-2"],[1,"flex-1","px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","shadow-md","hover:bg-blue-500","hover:shadow-lg","active:scale-95","transition-all","duration-200","text-center",3,"routerLink"],["title","Ajouter au panier",1,"w-12","h-12","rounded-lg","bg-amber-500","text-white","grid","place-items-center","shadow-md","hover:bg-amber-400","hover:shadow-lg","active:scale-95","transition-all",3,"click"],[1,"icon-shopping-cart","text-base"],[1,"absolute","top-3","right-3","h-12","w-12","bg-rose-600","text-white","text-sm","font-bold","rounded-full","grid","place-items-center","shadow-lg"],[1,"text-gray-400","line-through","text-sm"]],template:function(e,s){e&1&&(o(0,"div",0),d(1,"app-header"),o(2,"main",1),p(3,Y,2,0,"div",2)(4,Z,6,0,"div",3)(5,ne,11,1,"section",4),n(),d(6,"app-footer"),n()),e&2&&(r(3),c("ngIf",s.loading),r(),c("ngIf",!s.loading&&s.error),r(),c("ngIf",!s.loading&&!s.error))},dependencies:[V,O,$,B,A,R,N],encapsulation:2})};export{H as PromotionsPage};
