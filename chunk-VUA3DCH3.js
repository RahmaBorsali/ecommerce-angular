import{b as d}from"./chunk-IW6AFLJC.js";import{Q as l,V as u,a as i,b as o,gc as h,o as m,p as g,s as n}from"./chunk-R6KUZMSD.js";var P="app.cart.",w="app.cartmeta.",b="app.guestId",v=class a{auth=u(h);get cartKey(){return`${P}${this.uid()}`}get metaKey(){return`${w}${this.uid()}`}defaultMeta={shippingFee:8,freeShippingThreshold:8e3,couponCode:""};uid(){let t=this.auth.currentUser();if(t?.id)return String(t.id);let e=sessionStorage.getItem(b);return e||(e=crypto.randomUUID(),sessionStorage.setItem(b,e)),`guest-${e}`}read(t,e){try{return JSON.parse(localStorage.getItem(t)||"null")??e}catch{return e}}write(t,e){localStorage.setItem(t,JSON.stringify(e))}emit(){window.dispatchEvent(new Event("cartUpdated"))}getCart(){let t=localStorage.getItem(this.cartKey);return(t?JSON.parse(t):[]).map(r=>({id:Number(r.id),name:r.name??r.title??"Produit",price:Number(r.price)||0,image:r.image??"",quantity:Number(r.quantity)>0?Number(r.quantity):1}))}setCart(t){localStorage.setItem(this.cartKey,JSON.stringify(t)),window.dispatchEvent(new Event("cartUpdated"))}addToCart(t){let e=this.getCart(),r=e.findIndex(s=>s.id===t.id);r>=0?e[r].quantity+=t.quantity:e.push(t),this.setCart(e)}updateQuantity(t,e){let r=this.getCart().map(s=>s.id===t?o(i({},s),{quantity:Math.max(1,e)}):s);this.setCart(r)}removeFromCart(t){this.setCart(this.getCart().filter(e=>e.id!==t))}clearCart(){localStorage.removeItem(this.cartKey),window.dispatchEvent(new Event("cartUpdated"))}getMeta(){try{let t=localStorage.getItem(this.metaKey),e=t?JSON.parse(t):{},r=i(i({},this.defaultMeta),e),s=["SALE10","FREESHIP"];return r.couponCode&&!s.includes(r.couponCode.toUpperCase())&&(r.couponCode=""),r}catch{return i({},this.defaultMeta)}}setMeta(t){let e=i(i({},this.getMeta()),t);return localStorage.setItem(this.metaKey,JSON.stringify(e)),window.dispatchEvent(new Event("cartUpdated")),e}calcSubtotal(t){return t.reduce((e,r)=>e+r.price*r.quantity,0)}calcDiscount(t,e){return(e.couponCode||"").toUpperCase()==="SALE10"?+(t*.1).toFixed(2):0}calcShipping(t,e,r){if(t<=0)return 0;let s=e.shippingFee??this.defaultMeta.shippingFee,S=e.freeShippingThreshold??this.defaultMeta.freeShippingThreshold,y=(e.couponCode||"").toUpperCase(),p=0;y==="FREESHIP"?p=0:p=t>=S?0:s;let C=r?.express?4:0;return p+C}calcTotal(t,e,r){return Math.max(0,t-r)+e}static \u0275fac=function(e){return new(e||a)};static \u0275prov=l({token:a,factory:a.\u0275fac,providedIn:"root"})};var M=[{id:1,title:"Smartphone Pro X",price:2799,rating:4.5,image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=600",category:"\xC9lectronique",description:"Smartphone hautes performances avec \xE9cran OLED et triple cam\xE9ra."},{id:2,title:"Laptop Ultra 15",price:4999,rating:4.8,image:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=600",category:"Informatique",description:'Ultrabook 15" l\xE9ger, CPU derni\xE8re g\xE9n\xE9ration et SSD NVMe.'},{id:3,title:"Casque Bluetooth Premium",price:459,rating:4.3,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=600",category:"Audio",description:"Casque sans fil \xE0 r\xE9duction de bruit active."},{id:4,title:"Console de Jeux Nouvelle G\xE9n\xE9ration",price:2199,rating:4.7,image:"https://images.unsplash.com/photo-1486401899868-0e435ed85128?w=600",category:"Gaming",description:"Console next-gen avec SSD ultra rapide et Ray Tracing."},{id:5,title:"\xC9cran 4K 27 pouces",price:1249,rating:4.6,image:"https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=600",category:"Informatique",description:'Moniteur 27" 4K IPS, 99% sRGB, id\xE9al bureautique/cr\xE9a.'},{id:6,title:"Micro USB Streaming",price:349,rating:4.4,image:"https://images.unsplash.com/photo-1590602847861-f357a9332bbc?w=600",category:"Audio",description:"Micro \xE0 condensateur pour streaming et podcasts."},{id:7,title:"Lampe LED Smart",price:99,rating:4.2,image:"https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=600",category:"Maison",description:"Lampe connect\xE9e RGB, pilotable via appli."},{id:8,title:"\xC9couteurs True Wireless",price:289,rating:4.5,image:"https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=600",category:"Audio",description:"\xC9couteurs TWS avec ANC et autonomie 24h."},{id:9,title:"Appareil Photo Mirrorless",price:1499,category:"Photo",rating:4.9,image:"https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=400",description:"Qualit\xE9 professionnelle pour photographes"},{id:10,title:"Enceinte Intelligente",price:129,category:"Audio",image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400",rating:4.2,description:"Assistant vocal et son premium"},{id:11,title:"Clavier M\xE9canique RGB",price:159,category:"Accessoires",image:"https://images.unsplash.com/photo-1587829741301-dc798b83add3?w=400",rating:4.5,description:"Pr\xE9cision et confort pour gamers"},{id:12,title:"Souris Gaming Pro",price:79,category:"Accessoires",image:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=400",rating:4.4,description:"Capteur haute pr\xE9cision 16000 DPI"},{id:13,title:"\xC9cran 4K 27 pouces",price:449,category:"\xC9lectronique",image:"https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=400",rating:4.6,description:"Dalle IPS avec HDR pour professionnels"},{id:14,title:"Webcam HD Pro",price:89,category:"Accessoires",image:"../../assets/hdpro.jpg",rating:4.3,description:"Qualit\xE9 vid\xE9o 1080p pour visioconf\xE9rences"},{id:15,title:"Chargeur Sans Fil Rapide",price:39,category:"Accessoires",image:"../../assets/chargeursansfil.jpg",rating:4.1,description:"Charge rapide 15W compatible tous appareils"},{id:16,title:"Sac \xE0 Dos Tech",price:69,category:"Accessoires",image:"../../assets/sac.jpg",rating:4.4,description:"Protection optimale pour ordinateur portable"},{id:17,title:"Drone 4K",price:799,category:"Photo",image:"https://images.unsplash.com/photo-1473968512647-3e447244af8f?w=400",rating:4.5,description:"Stabilisation avanc\xE9e et autonomie 30min"},{id:18,title:"Hub USB-C 7 Ports",price:59,category:"Accessoires",image:"../../assets/hub.avif",rating:4.3,description:"Extension compl\xE8te pour laptop"},{id:19,title:"Manette Pro Controller",price:69,category:"Gaming",image:"https://images.unsplash.com/photo-1593305841991-05c297ba4575?w=400",rating:4.6,description:"Ergonomie premium pour gaming intensif"},{id:20,title:"C\xE2ble HDMI 2.1",price:29,category:"Accessoires",image:"../../assets/cable.jpg",rating:4.4,description:"Support 8K 60Hz et HDR"},{id:21,title:"Station de Charge Multi",price:79,category:"Accessoires",image:"../../assets/stationcharge.jpg",rating:4.2,description:"Charge simultan\xE9e de 4 appareils"},{id:22,title:"Projecteur Portable",price:399,category:"\xC9lectronique",image:"https://images.unsplash.com/photo-1598550476439-6847785fcea6?w=400",rating:4.5,description:"Projection Full HD jusqu'\xE0 120 pouces"},{id:23,title:"Cam\xE9ra de S\xE9curit\xE9 WiFi",price:89,category:"Maison",image:"../../assets/camera.jpg",rating:4.3,description:"Vision nocturne et d\xE9tection mouvement"},{id:24,title:"Barre de Son 2.1",price:249,category:"Audio",image:"https://images.unsplash.com/photo-1545454675-3531b543be5d?w=400",rating:4.6,description:"Son surround virtuel avec caisson"},{id:25,title:"Support PC Gamer RGB",price:39,category:"Accessoires",image:"https://images.unsplash.com/photo-1612198188060-c7c2a3b66eae?w=400",rating:4.1,description:"\xC9clairage RGB personnalisable"},{id:26,title:"Adaptateur USB-C vers HDMI",price:25,category:"Accessoires",image:"https://images.unsplash.com/photo-1625948515291-69613efd103f?w=400",rating:4.4,description:"Support 4K 60Hz"},{id:27,title:"Tapis de Souris XXL",price:35,category:"Accessoires",image:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=400",rating:4.3,description:"Surface ultra-lisse 900x400mm"},{id:28,title:"Cr\xE8me Hydratante Naturelle",price:59,category:"beaute",image:"../../assets/creme.jpg",rating:4.7,description:"Cr\xE8me visage hydratante \xE0 base d\u2019alo\xE9 vera et huiles naturelles."},{id:29,title:"Shampooing Bio Revitalisant",price:39,category:"beaute",image:"../../assets/shompoing.jpg",rating:4.5,description:"Shampooing sans sulfate pour cheveux doux et brillants."},{id:30,title:"Aspirateur Sans Fil Cyclone X200",price:299,category:"Maison",image:"../../assets/aspirateur.jpg",rating:4.6,description:"Aspirateur sans fil puissant avec batterie longue dur\xE9e et filtre HEPA."},{id:31,title:"Robot de Cuisine Multifonction",price:499,category:"Maison",image:"../../assets/robot.jpg",rating:4.8,description:"Robot de cuisine intelligent avec balance int\xE9gr\xE9e et 12 programmes automatiques."}],I={\u00C9lectronique:12,Informatique:8,Audio:20,Gaming:15,Photo:6,Accessoires:40,Maison:18,beaute:30},E={\u00C9lectronique:[{label:"Tension",value:"220\u2013240 V"},{label:"Connectivit\xE9",value:"Wi-Fi / Bluetooth"},{label:"Garantie",value:"24 mois"}],Informatique:[{label:"CPU",value:"Quad/Octa-core"},{label:"RAM",value:"8\u201332 Go"},{label:"Stockage",value:"256 Go \u2013 1 To SSD"}],Audio:[{label:"R\xE9ponse en fr\xE9quence",value:"20 Hz \u2013 20 kHz"},{label:"Bluetooth",value:"5.x"},{label:"Autonomie",value:"Jusqu\u2019\xE0 24 h"}],Gaming:[{label:"Stockage",value:"1 To NVMe"},{label:"Sortie vid\xE9o",value:"HDMI 2.1"},{label:"R\xE9seau",value:"Wi-Fi 6 / LAN"}],Photo:[{label:"Capteur",value:"APS-C / Full-Frame"},{label:"R\xE9solution",value:"24\u201345 MP"},{label:"Monture",value:"Compat. objectifs interchangeables"}],Accessoires:[{label:"Compatibilit\xE9",value:"Windows / macOS / Android / iOS"},{label:"Mat\xE9riau",value:"ABS / Aluminium"}],Maison:[{label:"Puissance",value:"800\u20132000 W"},{label:"Niveau sonore",value:"\u2264 72 dB"},{label:"Filtration",value:"HEPA / lavable"}],beaute:[{label:"Type de peau",value:"Tous types"},{label:"Sans",value:"Paraben / Sulfates"},{label:"Origine",value:"Ingr\xE9dients naturels"}]},T=[{author:"Nadia",rating:5,date:"2025-10-12",comment:"Qualit\xE9 au top, conforme \xE0 la description."},{author:"Yassine",rating:4,date:"2025-09-28",comment:"Tr\xE8s bon rapport qualit\xE9/prix."}];function R(a){let t=a.stock??I[a.category]??10,e=a.specs&&a.specs.length?a.specs:E[a.category]??[],r=a.reviews&&a.reviews.length?a.reviews:T,s=a.images&&a.images.length?a.images:[a.image];return o(i({},a),{stock:t,specs:e,reviews:r,images:s})}function D(a){switch(a.id){case 1:return o(i({},a),{stock:14,specs:[{label:"\xC9cran",value:'6.5" OLED 120 Hz'},{label:"SoC",value:"Snapdragon 8 Gen 2"},{label:"RAM",value:"12 Go"},{label:"Stockage",value:"256 Go"},{label:"Batterie",value:"5000 mAh"}],reviews:[{author:"Meriem",rating:5,date:"2025-10-20",comment:"Ultra fluide et photos magnifiques."},{author:"Adel",rating:4,date:"2025-10-05",comment:"Autonomie correcte, charge tr\xE8s rapide."}],images:[a.image,"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=600"]});case 2:return o(i({},a),{stock:9,specs:[{label:"\xC9cran",value:'15.6" 4K UHD'},{label:"CPU",value:"Intel Core i7 13\u1D49 gen"},{label:"RAM",value:"16 Go"},{label:"Stockage",value:"1 To SSD NVMe"},{label:"Poids",value:"1.4 kg"}],reviews:[{author:"Hana",rating:5,date:"2025-09-22",comment:"Parfait pour le montage vid\xE9o."},{author:"Sami",rating:4,date:"2025-09-11",comment:"\xC9cran sublime, ventilateurs audibles en charge."}]});case 3:return o(i({},a),{stock:22,specs:[{label:"ANC",value:"Active"},{label:"Bluetooth",value:"5.3"},{label:"Autonomie",value:"30 h"}]});case 4:return o(i({},a),{stock:11,specs:[{label:"SSD",value:"1 To"},{label:"Ray Tracing",value:"Oui"},{label:"Sortie",value:"HDMI 2.1"}]});case 30:return o(i({},a),{stock:13,specs:[{label:"Puissance",value:"120 AW"},{label:"Autonomie",value:"45 min"},{label:"Filtre",value:"HEPA"}]});case 31:return o(i({},a),{stock:6,specs:[{label:"Capacit\xE9 bol",value:"4.5 L"},{label:"Programmes",value:"12"},{label:"Balance",value:"Int\xE9gr\xE9e"}]});default:return a}}var c=M.map(a=>R(D(a))),f=class a{http=u(d);baseUrl="https://fakestoreapi.com";fetchApiProduct$(t){return this.http.get(`${this.baseUrl}/products/${t}`).pipe(n(e=>({id:1e3+e.id,title:e.title,price:e.price,rating:e.rating?.rate??0,image:e.image,category:e.category,description:e.description,stock:10,specs:[{label:"Origine",value:"Import\xE9"},{label:"Mat\xE9riau",value:"Standard"}],reviews:[{author:"Client API",rating:4,date:"2025-10-01",comment:"Bon rapport qualit\xE9/prix."}],images:[e.image,e.image,e.image]})))}getOne$(t){if(t>=1e3)return this.fetchApiProduct$(t-1e3);let e=c.find(r=>r.id===t);return e?m(e):t>=1&&t<=20?this.fetchApiProduct$(t):g(()=>new Error("not-found"))}getOneByKey$(t){let e=/^fs-(\d+)$/.exec(t);return e?this.fetchApiProduct$(Number(e[1])):/^\d+$/.test(t)?this.getOne$(Number(t)):g(()=>new Error("not-found"))}getAllMerged$(){return this.http.get(`${this.baseUrl}/products`).pipe(n(t=>t.map(e=>({id:1e3+e.id,title:e.title,price:e.price,rating:e.rating?.rate??0,image:e.image,category:e.category,description:e.description,stock:10,images:[e.image],slug:`fs-${e.id}`}))),n(t=>[...c.map(r=>o(i({},r),{slug:String(r.id)})),...t]))}getCategories$(){return this.getAllMerged$().pipe(n(t=>Array.from(new Set(t.map(e=>e.category)))))}getAll(){return c.map(t=>o(i({},t),{specs:[...t.specs??[]],reviews:[...t.reviews??[]],images:[...t.images??[]]}))}getById(t){let e=c.find(r=>r.id===t);return e?o(i({},e),{specs:[...e.specs??[]],reviews:[...e.reviews??[]],images:[...e.images??[]]}):void 0}getCategories(){return Array.from(new Set(c.map(t=>t.category)))}static \u0275fac=function(e){return new(e||a)};static \u0275prov=l({token:a,factory:a.\u0275fac,providedIn:"root"})};export{v as a,f as b};
