import{i as E,j as C,k as P}from"./chunk-IW6AFLJC.js";import{b as Q,d as B,e as J,f as K,g as W,h as $,r as z}from"./chunk-PI5CFJYO.js";import{$ as g,$a as H,Cb as D,Ha as y,Ma as b,Qa as _,V as v,Wb as j,Xa as u,Ya as r,Yb as q,Za as i,_ as p,_a as h,a as I,ab as M,bb as x,bc as w,cb as m,db as f,gc as k,jb as V,ma as A,nb as a,pb as S,rb as F,sb as N,tb as R,ua as O,wa as T,xa as s,xb as d}from"./chunk-R6KUZMSD.js";var Y=()=>["/promotions"],X=()=>({exact:!1});function ie(c,t){if(c&1&&(r(0,"span",24),a(1),i()),c&2){let e=f();s(),S(" ",e.cartCount," ")}}function ne(c,t){if(c&1){let e=x();H(0),r(1,"img",25),m("error",function(){p(e);let n=f();return g(n.avatarUrl=null)}),i(),M()}if(c&2){let e=f();s(),u("src",e.avatarUrl,O)}}function oe(c,t){c&1&&h(0,"i",26)}function ae(c,t){if(c&1){let e=x();r(0,"div",27)(1,"form",28),m("submit",function(n){p(e);let l=f();return g(l.handleSearch(n))}),r(2,"input",29),R("ngModelChange",function(n){p(e);let l=f();return N(l.searchQuery,n)||(l.searchQuery=n),g(n)}),m("keydown.escape",function(){p(e);let n=f();return g(n.closeSearch())}),i(),r(3,"button",30),a(4," Rechercher "),i()()()}if(c&2){let e=f();s(2),F("ngModel",e.searchQuery)}}function le(c,t){if(c&1){let e=x();r(0,"nav",31)(1,"ul",32)(2,"li")(3,"a",33),a(4,"Accueil"),i()(),r(5,"li")(6,"a",34),a(7,"Catalogue"),i()(),r(8,"li")(9,"a",35),a(10,"Promotions"),i()(),r(11,"button",36),m("click",function(){p(e);let n=f();return n.goToAccount(),g(n.isMenuOpen=!1)}),a(12," Mon Compte "),i()()()}c&2&&(s(6),u("routerLink","/catalog"),s(3),u("routerLink",d(3,Y))("routerLinkActiveOptions",d(4,X)))}var G=class c{constructor(t){this.router=t}logoUrl="assets/logo.png";searchQuery="";cartCount=0;isMenuOpen=!1;isLoggedIn=!1;isSearchOpen=!1;avatarUrl=null;el=v(A);currentUser=null;auth=v(k);onAuthChanged=()=>this.refreshAuth();onCartEvents=()=>this.updateCartCount();ngOnInit(){this.updateCartCount(),this.refreshAuth(),window.addEventListener("authChanged",this.onAuthChanged),window.addEventListener("cartUpdated",this.onCartEvents)}ngOnDestroy(){window.removeEventListener("authChanged",this.onAuthChanged),window.removeEventListener("cartUpdated",this.onCartEvents)}goToAccount(){this.refreshAuth(),this.router.navigate([this.isLoggedIn?"/account/profile":"/auth/signin"])}getCurrentUser(){try{let t=JSON.parse(localStorage.getItem("users")||"[]"),e=localStorage.getItem("authUserId");if(e&&Array.isArray(t)&&t.length){let n=t.find(l=>String(l.id)===String(e));if(n)return n}let o=localStorage.getItem("authUser");if(o){let n=JSON.parse(o);if(Array.isArray(t)&&t.length){let l=t.find(L=>String(L.id)===String(n.id));return I(I({},l),n)}return n}return null}catch{return null}}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleSearch(){this.isSearchOpen=!this.isSearchOpen,this.isSearchOpen&&setTimeout(()=>{let t=this.el.nativeElement.querySelector("#global-search");t?.focus(),t?.select()},0)}closeSearch(){this.isSearchOpen=!1}handleSearch(t){t?.preventDefault();let e=(this.searchQuery||"").trim();e&&(this.router.navigate(["/search"],{queryParams:{q:e}}),this.closeSearch())}onKey(t){t.key==="/"&&!this.isSearchOpen&&(t.preventDefault(),this.toggleSearch())}updateCartCount(){try{let t=this.auth.currentUser(),e;if(t?.id)e=String(t.id);else{let l=sessionStorage.getItem("app.guestId");l||(l=crypto.randomUUID(),sessionStorage.setItem("app.guestId",l)),e=`guest-${l}`}let o=localStorage.getItem(`app.cart.${e}`),n=o?JSON.parse(o):[];this.cartCount=n.reduce((l,L)=>l+(Number(L.quantity)||1),0)}catch{this.cartCount=0}}buildAvatarUrl(t){if(!t)return null;if(t.avatarUrl&&String(t.avatarUrl).trim())return String(t.avatarUrl).trim();let e=t.firstName??"",o=t.lastName??"";return`https://ui-avatars.com/api/?name=${encodeURIComponent(`${e||""} ${o||""}`.trim()||"User")}&background=2563eb&color=fff`}refreshAuth(){this.isLoggedIn=this.auth.isLoggedIn(),this.currentUser=this.auth.currentUser(),this.avatarUrl=this.buildAvatarUrl(this.currentUser)}static \u0275fac=function(e){return new(e||c)(y(E))};static \u0275cmp=b({type:c,selectors:[["app-header"]],hostBindings:function(e,o){e&1&&m("keydown",function(l){return o.onKey(l)},T)},decls:31,vars:12,consts:[["userIcon",""],[1,"bg-gradient-to-r","from-white","via-blue-50","to-white","shadow-lg","sticky","top-0","z-50","backdrop-blur-sm","bg-opacity-95"],[1,"container","mx-auto","px-4"],[1,"flex","items-center","justify-between","py-4"],["routerLink","/",1,"flex","items-center","gap-3"],["src","assets/logo6.jpg","alt","ElectroSpace Logo",1,"w-12","h-12","rounded-xl","object-cover","shadow-md"],[1,"text-2xl","font-bold","bg-gradient-to-r","from-blue-600","via-gray-700","to-orange-400","bg-clip-text","text-transparent"],[1,"hidden","lg:flex","items-center","gap-8"],["routerLink","/","routerLinkActive","text-blue-600",1,"relative","text-gray-800","font-medium","hover:text-blue-600","transition-colors","group"],[1,"absolute","-bottom-1","left-0","w-0","h-0.5","bg-blue-600","group-hover:w-full","transition-all","duration-300"],[1,"relative","text-gray-800","font-medium","hover:text-blue-600","transition-colors","group",3,"routerLink"],["routerLinkActive","text-blue-600 font-semibold",1,"relative","text-gray-800","font-medium","hover:text-blue-600","transition-colors","group",3,"routerLink","routerLinkActiveOptions"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-gray-100","hover:bg-gray-200","flex","items-center","justify-center","transition-colors",3,"click"],[1,"icon-search","text-lg","text-gray-700"],["routerLink","/cart",1,"relative","w-10","h-10","rounded-full","bg-gray-100","hover:bg-gray-200","flex","items-center","justify-center","transition-colors"],[1,"icon-shopping-cart","text-lg","text-gray-700"],["class","absolute -top-1 -right-1 bg-[#f97316] text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold shadow-md",4,"ngIf"],[1,"hidden","md:flex","w-10","h-10","rounded-full","bg-gradient-to-r","from-blue-600","to-blue-500","hover:from-blue-500","hover:to-blue-400","items-center","justify-center","shadow-md","transition-all","overflow-hidden",3,"click","title"],[4,"ngIf","ngIfElse"],[1,"lg:hidden","w-10","h-10","rounded-full","bg-gray-100","hover:bg-gray-200","flex","items-center","justify-center","transition-colors",3,"click"],[1,"text-lg","text-gray-700",3,"ngClass"],["class","pb-4",4,"ngIf"],["class","lg:hidden pb-4",4,"ngIf"],[1,"absolute","-top-1","-right-1","bg-[#f97316]","text-white","text-xs","w-5","h-5","rounded-full","flex","items-center","justify-center","font-bold","shadow-md"],["alt","avatar",1,"w-10","h-10","object-cover",3,"error","src"],[1,"icon-user","text-lg","text-white"],[1,"pb-4"],[1,"flex","gap-2",3,"submit"],["id","global-search","type","text","name","search","placeholder","Rechercher des produits...",1,"flex-1","px-4","py-3","border-2","border-blue-600","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-600","focus:ring-opacity-50",3,"ngModelChange","keydown.escape","ngModel"],["type","submit",1,"px-6","py-3","bg-gradient-to-r","from-blue-600","to-blue-400","text-white","rounded-xl","hover:shadow-lg","transition-all","font-medium"],[1,"lg:hidden","pb-4"],[1,"flex","flex-col","gap-3","mt-4"],["routerLink","/",1,"block","px-4","py-2","rounded-lg","hover:bg-blue-50","text-gray-800","font-medium"],[1,"block","px-4","py-2","rounded-lg","hover:bg-blue-50","text-gray-800","font-medium",3,"routerLink"],["routerLinkActive","text-blue-600 font-semibold",1,"block","px-4","py-2","rounded-lg","hover:bg-blue-50","text-gray-800","font-medium",3,"routerLink","routerLinkActiveOptions"],[1,"w-full","text-left","px-4","py-2","rounded-lg","hover:bg-blue-50","text-gray-800","font-medium",3,"click"]],template:function(e,o){if(e&1){let n=x();r(0,"header",1)(1,"div",2)(2,"div",3)(3,"a",4),h(4,"img",5),r(5,"span",6),a(6," ElectroSpace "),i()(),r(7,"nav",7)(8,"a",8),a(9," Accueil "),h(10,"span",9),i(),r(11,"a",10),a(12," Catalogue "),h(13,"span",9),i(),r(14,"a",11),a(15," Promotions "),h(16,"span",9),i()(),r(17,"div",12)(18,"button",13),m("click",function(){return p(n),g(o.toggleSearch())}),h(19,"i",14),i(),r(20,"a",15),h(21,"i",16),_(22,ie,2,1,"span",17),i(),r(23,"button",18),m("click",function(){return p(n),g(o.goToAccount())}),_(24,ne,2,1,"ng-container",19)(25,oe,1,0,"ng-template",null,0,D),i(),r(27,"button",20),m("click",function(){return p(n),g(o.toggleMenu())}),h(28,"i",21),i()()(),_(29,ae,5,1,"div",22)(30,le,13,5,"nav",23),i()()}if(e&2){let n=V(26);s(11),u("routerLink","/catalog"),s(3),u("routerLink",d(10,Y))("routerLinkActiveOptions",d(11,X)),s(8),u("ngIf",o.cartCount>0),s(),u("title",o.isLoggedIn?"Voir mon profil":"Se connecter"),s(),u("ngIf",o.avatarUrl)("ngIfElse",n),s(4),u("ngClass",o.isMenuOpen?"icon-x":"icon-menu"),s(),u("ngIf",o.isSearchOpen),s(),u("ngIf",o.isMenuOpen)}},dependencies:[w,j,q,C,P,z,$,Q,B,J,W,K],encapsulation:2})};var U=()=>["/catalog"],se=()=>({category:"electronique"}),ce=()=>({category:"gaming"}),ue=()=>({category:"audio"}),Z=class c{constructor(t){this.router=t}year=new Date().getFullYear();isLoggedIn=!1;currentUser=null;auth=v(k);goToAccount(){this.refreshAuth(),this.router.navigate([this.isLoggedIn?"/account/profile":"/auth/signin"])}refreshAuth(){this.isLoggedIn=this.auth.isLoggedIn(),this.currentUser=this.auth.currentUser()}static \u0275fac=function(e){return new(e||c)(y(E))};static \u0275cmp=b({type:c,selectors:[["app-footer"]],decls:45,vars:14,consts:[[1,"bg-gray-900","text-white","mt-16"],[1,"container","mx-auto","px-4","py-10"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-8"],[1,"text-2xl","font-bold","mb-4","text-yellow-500"],[1,"text-gray-400"],[1,"font-semibold","mb-4","text-white"],[1,"space-y-2","text-gray-400"],[1,"hover:text-yellow-500","transition-colors",3,"routerLink"],["routerLink","/cart",1,"hover:text-yellow-500","transition-colors"],[1,"hover:text-yellow-500","transition-colors","cursor-default",3,"click"],[1,"hover:text-yellow-500","transition-colors",3,"routerLink","queryParams"],[1,"border-t","border-gray-800","mt-8","pt-6","text-center","text-gray-400","text-sm"]],template:function(e,o){e&1&&(r(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h3",3),a(5,"ElectroSpace"),i(),r(6,"p",4),a(7," Votre destination pour les meilleurs produits \xE9lectroniques, audio et gaming. "),i()(),r(8,"div")(9,"h4",5),a(10,"Navigation"),i(),r(11,"ul",6)(12,"li")(13,"a",7),a(14,"Catalogue"),i()(),r(15,"li")(16,"a",8),a(17,"Panier"),i()(),r(18,"li")(19,"a",9),m("click",function(){return o.goToAccount()}),a(20,"Mon compte"),i()()()(),r(21,"div")(22,"h4",5),a(23,"Cat\xE9gories"),i(),r(24,"ul",6)(25,"li")(26,"a",10),a(27," \xC9lectronique "),i()(),r(28,"li")(29,"a",10),a(30," Gaming "),i()(),r(31,"li")(32,"a",10),a(33," Audio "),i()()()(),r(34,"div")(35,"h4",5),a(36,"Contact"),i(),r(37,"ul",6)(38,"li"),a(39,"Email : contact@electrospace.com"),i(),r(40,"li"),a(41,"T\xE9l : +216 50 541 931"),i()()()(),r(42,"div",11)(43,"p"),a(44),i()()()()),e&2&&(s(13),u("routerLink","/catalog"),s(13),u("routerLink",d(8,U))("queryParams",d(9,se)),s(3),u("routerLink",d(10,U))("queryParams",d(11,ce)),s(3),u("routerLink",d(12,U))("queryParams",d(13,ue)),s(12),S("\xA9 ",o.year," ElectroSpace. Tous droits r\xE9serv\xE9s."))},dependencies:[w,C],encapsulation:2})};export{G as a,Z as b};
